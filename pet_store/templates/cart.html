<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .cart-image { width: 80px; height: 80px; object-fit: cover; }
    </style>
</head>
<body>
<div class="container mt-5">
    <h2>My Cart</h2>

    {% if cart and cart.items.all %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Product</th>
                <th>Image</th>
                <th>Type</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Subtotal</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart.items.all %}
            <tr>
                <td>{{ item.product }}</td>
                <td>
                    {% if item.product_type == "Pet" %}
                        <img src="{{ item.product.image.url }}" class="cart-image">
                    {% elif item.product_type == "Petfoods" %}
                        <img src="{{ item.product.image.url }}" class="cart-image">
                    {% elif item.product_type == "Petaccessories" %}
                        <img src="{{ item.product.image.url }}" class="cart-image">
                    {% endif %}
                </td>
                <td>{{ item.product_type }}</td>
                <td>
                    <a href="{% url 'update_cart_quantity' item.id 'decrease' %}" class="btn btn-sm btn-warning">-</a>
                    {{ item.quantity }}
                    <a href="{% url 'update_cart_quantity' item.id 'increase' %}" class="btn btn-sm btn-success">+</a>
                </td>
                <td>Rs. {{ item.product.price }}</td>
                <td>Rs. {{ item.subtotal }}</td>
                <td>
                    <a href="{% url 'remove_from_cart' item.id %}" class="btn btn-danger btn-sm">Remove</a>
                </td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="5" class="text-end"><strong>Total:</strong></td>
                <td colspan="2"><strong>Rs. {{ cart.total_price }}</strong></td>
            </tr>
        </tbody>
    </table>
    {% else %}
        <p>Your cart is empty.</p>
    {% endif %}

    <a href="/" class="btn btn-primary">Continue Shopping</a>
</div>
</body>
</html>